(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{368:function(t,e,a){"use strict";a.r(e);var s=a(44),_=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置项"}},[t._v("#")]),t._v(" 配置项")]),t._v(" "),a("h2",{attrs:{id:"全局cli配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局cli配置"}},[t._v("#")]),t._v(" 全局CLI配置")]),t._v(" "),a("p",[t._v("此 CLI 工具需要一些配置参数，其中一些参数提供了默认值，而另外一些需要你提前设置好才能保证 CLI 的正常运行。提供了默认值的参数可以通过"),a("code",[t._v("otitan config --set")]),t._v("设置一个自定义的值予以覆盖，\n所有通过 "),a("code",[t._v("otitan config --set")]),t._v(" 设置的参数均会以"),a("code",[t._v("ini")]),t._v("格式存储在用户的 home 目录下一个名为 "),a("code",[t._v(".otitanrc")]),t._v(" 的文件里。\n这里保存了 "),a("code",[t._v("otitan-cli")]),t._v(" 所有的全局配置，你可以直接编辑这个文件修改这些参数。")]),t._v(" "),a("p",[t._v("你也可以使用 "),a("code",[t._v("otitan config")]),t._v(" 命令来审查或修改全局的 CLI 配置。")]),t._v(" "),a("h2",{attrs:{id:"无默认值的参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无默认值的参数"}},[t._v("#")]),t._v(" 无默认值的参数")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("若需要使用 CLI 的完整功能，必须提前设置好所有的无默认值的参数。")])]),t._v(" "),a("h3",{attrs:{id:"namespace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#namespace"}},[t._v("#")]),t._v(" namespace")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("true")])]),t._v(" "),a("p",[t._v("Gitlab项目模板所属的命名空间。命名空间可以是群组名称也可以是个人的用户名。CLI 会获取到该命名空间下的所有项目作为列表，用户可以从中选择一项作为模板。")]),t._v(" "),a("blockquote",[a("p",[t._v("目前公司的项目模板所属的命名空间是 "),a("code",[t._v("frontend-cli")])])])])]),t._v(" "),a("h3",{attrs:{id:"gitlabapitoken"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlabapitoken"}},[t._v("#")]),t._v(" gitlabAPIToken")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("true")])]),t._v(" "),a("p",[t._v("Gitlab中的个人访问令牌。个人访问令牌可以在访问那些需要权限认证的GitLab API时进行权限验证。\n对于未设置过的用户来说，通常需要添加一个。可以在 "),a("code",[t._v("http://Gitlab_IP/profile/personal_access_tokens")]),t._v(" 这个页面中添加一个，然后保存到全局配置中。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提醒")]),t._v(" "),a("p",[t._v("生成的令牌只会在刚生成时显示，刷新页面后将不会再显示，请及时保存好该令牌。")])])])]),t._v(" "),a("h3",{attrs:{id:"jenkinsuser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkinsuser"}},[t._v("#")]),t._v(" jenkinsUser")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("true")])]),t._v(" "),a("p",[t._v("Jenkins的登录用户名。在访问Jenkins Rest Api时需要进行权限认证，在构造认证信息时需要该用户名。")])])]),t._v(" "),a("h3",{attrs:{id:"jenkinsapitoken"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkinsapitoken"}},[t._v("#")]),t._v(" jenkinsAPIToken")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("true")])]),t._v(" "),a("p",[t._v("Jenkins的 API Token 。在访问Jenkins Rest Api时需要进行权限认证，在构造认证信息时需要该 API Token 。\n可以在 "),a("code",[t._v("http://Jenkins_IP:8080/user/${jenkinsUser}/configure")]),t._v(" 这个页面中给当前用户添加一个 API Token。")])])]),t._v(" "),a("h3",{attrs:{id:"projecthostname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#projecthostname"}},[t._v("#")]),t._v(" projectHostname")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("true")])]),t._v(" "),a("p",[t._v("部署项目的服务器地址。该地址要和Jenkinsfile中通过 "),a("code",[t._v("SSH")]),t._v(" 远程连接到的服务器的地址保持一致，同时也用于 CLI 工具向服务器的合适位置上传nginx配置。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提醒")]),t._v(" "),a("p",[t._v("因为Jenkins和CLI所在的机器上都需要远程连接到服务器，所以都要提前配置好机器使其可以用 "),a("code",[t._v("SSH")]),t._v(" 命令连接服务器。"),a("br"),t._v("\n使用密钥认证机制远程登录linux的配置方式，可以参考"),a("a",{attrs:{href:"./config_ssh_to_server"}},[t._v("这里")]),t._v(" 。")])])])]),t._v(" "),a("h2",{attrs:{id:"有默认值的参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有默认值的参数"}},[t._v("#")]),t._v(" 有默认值的参数")]),t._v(" "),a("h3",{attrs:{id:"repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repository"}},[t._v("#")]),t._v(" repository")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'gitlab'")])]),t._v(" "),a("p",[t._v("仓库管理系统的类型，目前只支持"),a("code",[t._v("gitlab")]),t._v(",未来会考虑支持"),a("code",[t._v("github")]),t._v("和"),a("code",[t._v("gitee")]),t._v("。")])])]),t._v(" "),a("h3",{attrs:{id:"repositoryprotocol"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repositoryprotocol"}},[t._v("#")]),t._v(" repositoryProtocol")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'http'")])]),t._v(" "),a("p",[t._v("仓库管理系统服务的协议。")])])]),t._v(" "),a("h3",{attrs:{id:"repositoryhostname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repositoryhostname"}},[t._v("#")]),t._v(" repositoryHostname")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'192.168.0.17'")])]),t._v(" "),a("p",[t._v("仓库管理系统服务所在的主机名。")])])]),t._v(" "),a("h3",{attrs:{id:"repositoryport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repositoryport"}},[t._v("#")]),t._v(" repositoryPort")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'80'")])]),t._v(" "),a("p",[t._v("仓库管理系统服务的端口号。")])])]),t._v(" "),a("h3",{attrs:{id:"repositoryapibaseurl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repositoryapibaseurl"}},[t._v("#")]),t._v(" repositoryApiBaseURL")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'/api/v4'")])]),t._v(" "),a("p",[t._v("仓库管理系统 API 的 base url。")]),t._v(" "),a("p",[t._v("gitlab 中的 API 应该以 "),a("code",[t._v("api")]),t._v("和 API 版本开头。如 API 版本是 v4，则 API 的统一前缀应该是 "),a("code",[t._v("/api/v4")]),t._v("。API版本信息定义在 "),a("a",{attrs:{href:"https://gitlab.com/gitlab-org/gitlab-foss/-/blob/master/lib/api/api.rb",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("lib/api.rb")]),a("OutboundLink")],1),t._v(" 。"),a("br"),t._v("\n可以查看 Gitlab 的 API 文档，地址参考： "),a("code",[t._v("http://Gitlab_IP/help/api/README.md#current-status")])])])]),t._v(" "),a("h3",{attrs:{id:"jenkinshostname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkinshostname"}},[t._v("#")]),t._v(" jenkinsHostname")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'192.168.0.12'")])]),t._v(" "),a("p",[t._v("Jenkins服务所在的主机名。")])])]),t._v(" "),a("h3",{attrs:{id:"projecthostusername"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#projecthostusername"}},[t._v("#")]),t._v(" projectHostUsername")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Require: "),a("code",[t._v("false")])])]),t._v(" "),a("li",[a("p",[t._v("Default: "),a("code",[t._v("'root'")])]),t._v(" "),a("p",[t._v("项目需要部署的服务器的用户名。")])])])])}),[],!1,null,null,null);e.default=_.exports}}]);